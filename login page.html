<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Students Login</title>
  <link rel="icon" href="images/logo.png" />
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f7f7f7;
      overflow-x: hidden;
    }

    #loginSection {
      background: url('images/chess titans academy logo.png') no-repeat center center/cover;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }

    #loginSection::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      z-index: 0;
    }

    .login-container {
      position: relative;
      z-index: 1;
      background: rgba(255, 255, 255, 0.95);
      padding: 40px 30px;
      border-radius: 20px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
      width: 90%;
      max-width: 400px;
      text-align: center;
      animation: fadeIn 1s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(40px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .login-container h3 {
      font-weight: 700;
      color: #dc3309;
      margin-bottom: 25px;
    }

    .form-control {
      border-radius: 30px;
      padding: 12px 15px;
      text-align: center;
      border: 1.8px solid #ddd;
      transition: 0.3s;
    }

    .form-control:focus {
      border-color: #dc3309;
      box-shadow: 0 0 8px rgba(220, 51, 9, 0.3);
    }

    .btn-login {
      border-radius: 30px;
      width: 100%;
      background: linear-gradient(135deg, #dc3309, #ff6600);
      color: white;
      font-weight: 600;
      transition: 0.4s;
      border: none;
      padding: 12px;
    }

    .btn-login:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 10px rgba(220, 51, 9, 0.4);
    }

    .instructions {
      background: rgba(255, 255, 255, 0.9);
      margin-top: 25px;
      border-radius: 15px;
      padding: 15px;
      text-align: left;
      font-size: 13px;
    }

    .instructions h6 {
      color: #dc3309;
      text-align: center;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, #fff, #ffe6e1);
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      z-index: 9999;
    }

    .chess-king {
      font-size: 100px;
      color: #dc3309;
      animation: spinBounce 2s infinite ease-in-out;
      text-shadow: 0 0 15px #ff4500, 0 0 25px #ff7733;
    }

    @keyframes spinBounce {
      0% {
        transform: rotate(0deg) scale(1);
      }

      50% {
        transform: rotate(180deg) scale(1.2);
      }

      100% {
        transform: rotate(360deg) scale(1);
      }
    }

    .loading-text {
      margin-top: 25px;
      font-weight: 600;
      color: #333;
      font-size: 18px;
      animation: fadeBlink 1.5s infinite;
      text-shadow: 0 0 8px #ff4500;
    }

    @keyframes fadeBlink {
      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: 0.4;
      }
    }

    #homeworkSection {
      display: none;
      animation: slideIn 1s ease-in-out;
      background: linear-gradient(180deg, #ff8000, #ffe0b3);
      min-height: 100vh;
      padding-bottom: 80px;
      position: relative;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .btn-logout {
      background-color: #c43e00;
      color: #fff;
      border-radius: 30px;
      padding: 8px 25px;
      border: none;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 10px rgba(196, 62, 0, 0.3);
    }

    .btn-logout:hover {
      background-color: #a53200;
      transform: scale(1.05);
    }

    .homework-card {
      max-width: 600px;
      background: linear-gradient(145deg, #fff3e0, #ffd9b3);
      border-radius: 20px;
      transition: all 0.3s ease;
      border: none;
    }

    .homework-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 20px rgba(196, 62, 0, 0.25);
    }

    .nav-tabs .nav-link {
      background: #ffe3cc;
      color: #c43e00;
      border-radius: 25px;
      border: none;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .nav-tabs .nav-link.active {
      background: #c43e00;
      color: white;
      transform: scale(1.05);
    }

    .nav-tabs .nav-link:hover {
      background: #ffbb80;
      color: #fff;
    }

    @media (max-width: 768px) {
      .btn-logout {
        width: 100%;
        margin-top: 10px;
        text-align: center;
        border-radius: 25px;
      }

      .d-flex.justify-content-end {
        justify-content: center !important;
      }

      h2 {
        font-size: 22px;
      }
    }

    header {
      background: linear-gradient(90deg, #000000, #2c2c54);
    }
  </style>
</head>

<body>

  <!-- ‚úÖ LOGIN SECTION -->
  <section id="loginSection">
    <div class="login-container" id="loginBox">
      <h3>Students Login</h3>
      <form id="loginForm">
        <input type="text" id="username" class="form-control mb-3" placeholder="Enter Username" required />
        <input type="date" id="password" class="form-control mb-3" placeholder="D.O.B" required />
        <button type="submit" class="btn btn-login">Login</button>
        <p id="message" class="mt-3"></p>
      </form>

      <div class="instructions">
        <h6>üîπ Instructions:</h6>
        <ul>
          <li>Enter your Name as <b>Username</b>.</li>
          <li>Enter your <b>Date of Birth as Password</b> (DD-MM-YYYY).</li>
          <li>Then your weekly Puzzle page will open automatically.</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ‚úÖ LOADING OVERLAY -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="chess-king">‚ôò</div>
    <div class="loading-text" id="loadingText">Preparing Your Weekly Puzzle.....</div>
  </div>

  <!-- ‚úÖ HOMEWORK SECTION -->
  <section id="homeworkSection">
    <header class="bg-dark text-white text-center py-3 shadow-lg">
      <h1 class="fw-bold text-uppercase mb-0">Chess Titans Academy</h1>
      <p class="mb-0 text-warning fw-semibold">Develop Your Mind Like a Grandmaster ‚ôõ</p>
      <div class="d-flex justify-content-end p-3 ">
        <button class="btn-logout btn btn-danger fw-bold px-4 py-2" onclick="logout()">Logout</button>
      </div>

      <div class="text-center p-4">
        <h2 class="fw-bold text-uppercase mb-1 text-white">Weekly Task (19/10/2025)</h2>
        <p class="fw-semibold text-white">Complete your tasks with focus ‚ôî</p>
      </div>
    </header>

    <div class="container mt-3" id="homeworkTabsContainer">
      <ul class="nav nav-tabs justify-content-center flex-wrap" id="homeworkTabs">
        <li class="nav-item m-2">
          <button class="nav-link active px-4 py-2 fw-bold shadow-sm" id="beginnerTab">Beginner Level 1</button>
        </li>
        <li class="nav-item m-2">
          <button class="nav-link px-4 py-2 fw-bold shadow-sm" id="beginner2Tab">Beginner Level 2</button>
        </li>
        <li class="nav-item m-2">
          <button class="nav-link px-4 py-2 fw-bold shadow-sm" id="intermediateTab">Intermediate Level 1</button>
        </li>
        <li class="nav-item m-2">
          <button class="nav-link px-4 py-2 fw-bold shadow-sm" id="intermediate2Tab">Intermediate Level 2</button>
        </li>
        <li class="nav-item m-2">
          <button class="nav-link px-4 py-2 fw-bold shadow-sm" id="intermediate3Tab">Intermediate Level 3</button>
        </li>
      </ul>
    </div>

    <!-- ‚úÖ Beginner Level 1 -->
    <div id="beginnerHomework" class="container text-center mt-4">
      <!-- ‚ôü Puzzle 1 -->
      <h4 class="fw-bold text-dark mb-3">‚ôô Beginner Level 1</h4>
      <div class="card border-0 shadow-lg p-4 mx-auto homework-card">
        <img src="images/Homework File/BL 1.1.jpg" alt="Beginner Homework" class="img-fluid rounded shadow-sm my-3" />
        <h5 class="fw-bold text-danger">CHALLENGE NOTE</h5>
        <p class="fw-semibold text-secondary mt-2">
          Try to attack the Black Rook with the Help of  <strong>‚ÄúWhite Queen‚Äù</strong>
        </p>
      </div>

      <!-- ‚ôü Puzzle 2 -->
      <h4 class="fw-bold text-dark mb-3"></h4>
      <div class="card border-0 shadow-lg p-3 mx-auto homework-card">
        <img src="images/Homework File/BL 1.2.jpg" alt="Beginner Homework" class="img-fluid rounded shadow-sm my-3" />
        <h5 class="fw-bold text-danger">CHALLENGE NOTE</h5>
        <p class="fw-semibold text-secondary mt-2">
          Try to Give a Check for Balck King with the Help of  <strong>‚ÄúWhite Queen‚Äù</strong>
        </p>
      </div>

<!-- ‚úÖ Beginner Level 1 Solution Button -->
<!-- <div class="card border-0 shadow-lg p-4 mx-auto homework-card mt-4">
    <h5 class="fw-bold text-dark mb-3">üé• Beginner Level 1 - Solution</h5>
    <a href="https://youtu.be/lfWsKx_U5vo" target="_blank"
      class="btn btn-danger btn-lg w-100 fw-bold">Watch Solution Video</a>
  </div>
</div> -->
    </div>





    <!-- ‚úÖ Beginner Level 2 -->
    <div id="beginner2Homework" class="container text-center mt-4" style="display: none;">
      <h4 class="fw-bold text-dark mb-3">‚ôô Beginner Level 2</h4>

      <!-- ‚ôü Puzzle 1 -->
      <div class="card puzzle-card text-center mx-auto mb-3 shadow-lg homework-card">
        <h4 class="text-dark fw-bold">‚ôô PUZZLE 1</h4>
        <p class="card-text text-muted">Try to make Checkmate for Black with the Help of Two Rooks</p>
        <a href="https://www.chess.com/analysis/game/pgn/3EByRC6nKp/analysis" target="_blank"
          class="btn btn-success btn-lg w-100 mt-2">Open Puzzle 1</a>
      </div>

      <!-- ‚ôü Puzzle 2 -->
      <!-- <div class="card puzzle-card text-center mx-auto mb-4 shadow-lg homework-card">
        <h4 class="text-dark fw-bold">‚ôô PUZZLE 2</h4>
        <p class="card-text text-muted">Use your Knight to deliver a surprising checkmate in 2 moves!</p>
        <a href="https://www.chess.com/analysis/game/pgn/dY9r3FjN/analysis" target="_blank"
          class="btn btn-success btn-lg w-100 mt-2">Open Puzzle 2</a>
      </div> -->

      <!-- ‚ôô Level Description -->
      <div class="card border-0 shadow-lg p-4 mx-auto homework-card">
        <h4 class="fw-bold text-dark mb-3">‚ôô Beginner Level 2</h4>
        <img src="images/Homework File/BL 2.1.jpg" alt="Beginner Level 2" class="img-fluid rounded shadow-sm my-3" />
        <h5 class="fw-bold text-danger">CHALLENGE NOTE</h5>
        <p class="fw-semibold text-secondary mt-2">
          Give a Fork with the help of  <strong>‚ÄúBlack Queen‚Äù</strong> .
        </p>
      </div>
        
<!-- ‚úÖ Beginner Level 2 Solution Button -->
  <!-- <div class="card border-0 shadow-lg p-4 mx-auto homework-card mt-4">
    <h5 class="fw-bold text-dark mb-3">üé• Beginner Level 2 - Solution</h5>
    <a href="https://youtu.be/5G2KZlVwExw" target="_blank"
      class="btn btn-danger btn-lg w-100 fw-bold">Watch Solution Video</a>
  </div> -->
    </div>






    <!-- ‚úÖ Intermediate Level 1 -->
    <div id="intermediateHomework" class="container mt-4" style="display: none;">
      <h4 class="text-center mb-4 fw-bold text-dark">‚ôî Intermediate Level 1</h4>
      <!-- ‚ôü Puzzle 1 -->
      <div class="card puzzle-card text-center mx-auto mb-3 shadow-lg homework-card">
        <h4 class="text-dark fw-bold">‚ôî PUZZLE 1</h4>
        <p class="card-text text-muted">Try to Make checkmate for the Black.</p>
        <a href="https://www.chess.com/analysis/game/pgn/5GJ6yMeLop/analysis" target="_blank"
          class="btn btn-success btn-lg w-100 mt-2">Open Puzzle</a>
      </div>
      <!-- ‚ôü Puzzle 2 -->
      <!-- <div class="card puzzle-card text-center mx-auto mb-3 shadow-lg homework-card">
        <h4 class="text-dark fw-bold">‚ôî PUZZLE 2</h4>
        <p class="card-text text-muted">Click below to open your chess puzzle and solve it carefully.</p>
        <a href="https://www.chess.com/analysis/game/pgn/LMd4itQBg/analysis" target="_blank"
          class="btn btn-success btn-lg w-100 mt-2">Open Puzzle</a>
      </div> -->
      <!-- ‚ôü Puzzle 3 -->
      <div class="card border-0 shadow-lg p-4 mx-auto homework-card mt-5 text-center">
        <img src="images/Homework File/IL 1.1.jpg" alt="Intermediate Level 1" class="img-fluid rounded shadow-sm my-3 mx-auto d-block" />
        <h5 class="fw-bold text-danger">CHALLENGE NOTE</h5>
        <p class="fw-semibold text-secondary mt-2">
          Try to make checkmate with the help of  <strong>‚ÄúWhite Rooks‚Äù</strong> .
        </p>
      </div>

<!-- ‚úÖ Intermediate Level 1 Solution Button -->
  <!-- <div class="card border-0 shadow-lg p-4 mx-auto homework-card mt-4">
    <h5 class="fw-bold text-dark mb-3">üé• Intermediate Level 1 - Solution</h5>
    <a href="https://youtu.be/KaSYbIixUIU" target="_blank"
      class="btn btn-danger btn-lg w-100 fw-bold">Watch Solution Video</a>
  </div>  -->
    </div>






    <!-- ‚úÖ Intermediate Level 2 -->
    <div id="intermediate2Homework" class="container text-center mt-4" style="display: none;">
      <h4 class="text-center mb-4 fw-bold text-dark">‚ôî Intermediate Level 2</h4>

      <!-- ‚ôü Puzzle 1 -->
      <div class="card puzzle-card text-center mx-auto mb-3 shadow-lg homework-card">
        <h4 class="text-dark fw-bold">‚ôî PUZZLE 1</h4>
        <p class="card-text text-muted">Find the Best Move for White.</p>
        <a href="https://www.chess.com/analysis/game/pgn/3SyRAUyp2i/analysis" target="_blank"
          class="btn btn-success btn-lg w-100 mt-2">Open Puzzle 1</a>
      </div>

      <!-- ‚ôü Puzzle 2 -->
      <!-- <div class="card puzzle-card text-center mx-auto mb-4 shadow-lg homework-card">
        <h4 class="text-dark fw-bold">‚ôî PUZZLE 2</h4>
        <p class="card-text text-muted">Find a precise fork tactic to gain a winning advantage.</p>
        <a href="https://www.chess.com/analysis/game/pgn/Yh2uC3Qv/analysis" target="_blank"
          class="btn btn-success btn-lg w-100 mt-2">Open Puzzle 2</a>
      </div> -->

      <!-- ‚ôü Puzzle 3 -->
      <!-- <div class="card puzzle-card text-center mx-auto mb-4 shadow-lg homework-card">
        <h4 class="text-dark fw-bold">‚ôî PUZZLE 3</h4>
        <p class="card-text text-muted">Find a precise fork tactic to gain a winning advantage.</p>
        <a href="https://www.chess.com/analysis/game/pgn/Yh2uC3Qv/analysis" target="_blank"
          class="btn btn-success btn-lg w-100 mt-2">Open Puzzle 2</a>
      </div> -->

      <!-- ‚ôü Image & Challenge Section -->
      <div class="card border-0 shadow-lg p-4 mx-auto homework-card mt-5">
        <img src="images/Homework File/IL 2.1.jpg" alt="Intermediate Level 2" class="img-fluid rounded shadow-sm my-3" />
        <h5 class="fw-bold text-danger">CHALLENGE NOTE</h5>
        <p class="fw-semibold text-secondary mt-2">
          Find Best move for white<strong></strong> .
        </p>
      </div>
<!-- ‚úÖ Intermediate Level 2 Solution Button -->
<!-- <div class="card border-0 shadow-lg p-4 mx-auto homework-card mt-4">
    <h5 class="fw-bold text-dark mb-3">üé• Intermediate Level 2 - Solution</h5>
    <a href="https://youtu.be/hKN_Vvj-xjI" target="_blank"
      class="btn btn-danger btn-lg w-100 fw-bold">Watch Solution Video</a>
  </div>  -->
    </div>






    <!-- ‚úÖ Intermediate Level 3  -->
    <div id="intermediate3Homework" class="container text-center mt-4" style="display: none;">
      <h4 class="text-center mb-4 fw-bold text-dark">‚ôî Intermediate Level 3</h4>

      <!-- ‚ôü Puzzle 1 -->
      <div class="card puzzle-card text-center mx-auto mb-3 shadow-lg homework-card">
        <h4 class="text-dark fw-bold">‚ôî PUZZLE 1</h4>
        <p class="card-text text-muted">Find the Best Move for White </p>
        <a href="https://www.chess.com/analysis/game/pgn/3oR6MUufEv/analysis" target="_blank"
          class="btn btn-success btn-lg w-100 mt-2">Open Puzzle 1</a>
      </div>

      <!-- ‚ôü Puzzle 2 -->
      <!-- <div class="card puzzle-card text-center mx-auto mb-3 shadow-lg homework-card">
        <h4 class="text-dark fw-bold">‚ôî PUZZLE 2</h4>
        <p class="card-text text-muted">Find a hidden pin tactic to trap your opponent‚Äôs Queen.</p>
        <a href="https://www.chess.com/analysis/game/pgn/testPuzzle2/analysis" target="_blank"
          class="btn btn-success btn-lg w-100 mt-2">Open Puzzle 2</a>
      </div> -->

      <!-- ‚ôü Puzzle 3 -->
      <div class="card border-0 shadow-lg p-4 mx-auto homework-card mt-5">
        <img src="images/Homework File/IL 3.1.jpg" alt="Intermediate Level 3" class="img-fluid rounded shadow-sm my-3" />
        <h5 class="fw-bold text-danger">CHALLENGE NOTE</h5>
        <p class="fw-semibold text-secondary mt-2">
          Find the Best move for <strong>‚ÄúBlack‚Äù</strong> .
        </p>
      </div>

<!-- ‚úÖ Intermediate Level 3 - Solution Button -->
<!-- <div class="card border-0 shadow-lg p-4 mx-auto homework-card mt-4 text-center">
  <h5 class="fw-bold text-dark mb-3">üé• Intermediate Level 3 - Solution</h5>
  <a href="https://youtu.be/ZgTRP8DE29A" target="_blank" rel="noopener noreferrer"
     class="btn btn-danger btn-lg w-100 fw-bold">Watch Solution Video</a>
</div> -->
    </div>

    

    <footer class="container-fluid text-center p-3 bg-dark text-white fixed-bottom shadow-lg">
      &copy; 2025 <span class="fw-bold text-warning">Chess Titans Academy</span>. All rights reserved.
    </footer>
  </section>

  <script>
    // -------------------------
    // USER DATABASE (original names + DOB)
    // -------------------------
    const users = {
      // SHINING STARS STUDENTS
      "Jovin Benson D": "22-12-2019",
      "A.s.pratyush": "01-12-2018",
      "RishabRaghvieir.P.V": "20-11-2014",
      "A.B.Arvind kumar": "28-11-2012",
      "SRIRAGHAV SOLAIRAJ": "17-01-2017",
      "P.MAGIZHAN": "26-11-2017",
      "Sashwanth.K.K": "06-10-2012",
      "Deswanth.K.K": "03-10-2016",
      "TS.Krishang": "22-03-2017",
      "P.VIDYUT": "23-06-2015",
      "B kirthika sai": "11-07-2017",
      "Pragadeesh.S": "01-07-2015",
      "Sanjeeth Gokul": "23-12-2013",
      "R.R.vidhyuthsai": "12-04-2016",
      "K.S.SHIVANI": "11-02-2013",
      "K.S.SABARISH": "12-06-2018",
      "Nandika.R.Menon": "24-08-2018",
      "A.Jeevan Raj": "01-05-2013",
      "S.LOHITH":"10-11-2011",
      "Guganesh.R":"14-07-2016",
      "N.ANANDHARAJAN":"22-07-2014",
      "K.T.BAVYESH":"09-12-2018",
      "N.Aadheesh":"06-10-2018",
      "C.SABARISH":"10-01-2019",

      // FLY HIGH ACHIEVERS STUDENTS 
      "S.pranesh ananth": "02-11-2015",
      "J.KIRTHIKA": "02-04-2017",
      "J.RITHVIKA": "10-10-2018",
      "N.ROHITH": "07-11-2018",
      "N.S.Nilan": "06-12-2018",
      "G.NISHA": "20-12-2014",
      "K.MOHAMMED NOOR KHAN": "04-07-2014",
      "M.MOHAMMED RIYAS":"21-07-2013",

      // ONLINE STUDENTS 
      "S.Srihas": "24-05-2014",
      "M.R.SAHNAAZ": "06-09-2011",
      "Pranov.S":"01-03-2013",
      "N.BAVYUKTH":"28-04-2016",
      "B.K.KAARTHIKA SRI":"29-03-2012",
      "M.GERSHON":"18-09-2014",
      "M.FABIAN":"08-06-2017",



      //ADMIN
      "steve":"01-11-2002"

    };

    // -------------------------
    // LEVEL ASSIGNMENTS (lowercase names for case-insensitive matching)
    // You can edit these arrays to add/remove students to specific levels
    // -------------------------
    const levelGroups = {
      beginner1: [
        "Jovin Benson D",
        "TS.Krishang",
        "K.S.SABARISH",
        "j.kirthika",
        "j.rithvika",
        "N.ROHITH",
        "N.S.Nilan",
        "s.pranesh ananth",
        "K.T.BAVYESH",
        "C.SABARISH"
        ],
      beginner2: [
        "a.s.pratyush",
        "g. nisha",
        "b kirthika sai",
        "RishabRaghvieir.P.V",
        "SRIRAGHAV SOLAIRAJ",
        "K.S.SHIVANI",
        "K.MOHAMMED NOOR KHAN",
        "M.R.SAHNAAZ",
        "Nandika.R.Menon",
        "M.MOHAMMED RIYAS",
        "N.ANANDHARAJAN",
        "N.BAVYUKTH",
        "B.K.KAARTHIKA SRI",
        "M.FABIAN"
        ],
      intermediate1: [
       "P. Magizhan",
       "Pragadeesh.S",
       "Sanjeeth Gokul",
       "R R vidhyuthsai",
       "S.Srihas",
       "A.Jeevan Raj",
       "Guganesh.R",
       "N.Aadheesh",
       "M.GERSHON"
      ],
      intermediate2: [
       "S.LOHITH", 
       "P.VIDYUT",
       "Deswanth. K. K"

      ],
      intermediate3: [
        "A.B.Arvind kumar",
        "Sashwanth. K. K",
        "Pranov.S"
      ],
      admin: [
        "steve"
      ]
    };

    // -------------------------
    // SPECIAL USER STATES (lowercase)
    // -------------------------
    const renewalUsers = ["vijay", "nithya"];
    const warningUsers = ["john", "rogers"];

    // Elements
    const form = document.getElementById("loginForm");
    const message = document.getElementById("message");
    const loadingOverlay = document.getElementById("loadingOverlay");
    const loadingText = document.getElementById("loadingText");
    const loginSection = document.getElementById("loginSection");
    const homeworkSection = document.getElementById("homeworkSection");

    const beginner1 = document.getElementById("beginnerHomework");
    const beginner2 = document.getElementById("beginner2Homework");
    const intermediate1 = document.getElementById("intermediateHomework");
    const intermediate2 = document.getElementById("intermediate2Homework");
    const intermediate3 = document.getElementById("intermediate3Homework");

    const tabsContainer = document.getElementById("homeworkTabsContainer");

    // Utility: mapping of group keys to DOM ids
    const levelToDom = {
      beginner1: { sectionId: "beginnerHomework", tabId: "beginnerTab" },
      beginner2: { sectionId: "beginner2Homework", tabId: "beginner2Tab" },
      intermediate1: { sectionId: "intermediateHomework", tabId: "intermediateTab" },
      intermediate2: { sectionId: "intermediate2Homework", tabId: "intermediate2Tab" },
      intermediate3: { sectionId: "intermediate3Homework", tabId: "intermediate3Tab" }
    };

    // Hide everything helper
    function hideAllPuzzles() {
      Object.values(levelToDom).forEach(v => {
        const sec = document.getElementById(v.sectionId);
        if (sec) sec.style.display = "none";
      });
    }

    function hideAllTabs() {
      const tabs = tabsContainer.querySelectorAll(".nav-item");
      tabs.forEach(tab => tab.style.display = "none");
    }

    function clearActiveTabLinks() {
      const links = document.querySelectorAll("#homeworkTabs .nav-link");
      links.forEach(l => l.classList.remove("active"));
    }

    // Normalize date from input (YYYY-MM-DD) to DD-MM-YYYY
    function normalizeDate(value) {
      if (!value) return "";
      const [y, m, d] = value.split("-");
      return `${d.padStart(2, "0")}-${m.padStart(2, "0")}-${y}`;
    }

    // Show a specific level (by level key)
    function showAssignedLevel(levelKey) {
      hideAllPuzzles();
      hideAllTabs();
      clearActiveTabLinks();

      const mapping = levelToDom[levelKey];
      if (!mapping) return;

      const section = document.getElementById(mapping.sectionId);
      const tabBtn = document.getElementById(mapping.tabId);
      if (section) section.style.display = "block";
      if (tabBtn && tabBtn.parentElement) tabBtn.parentElement.style.display = "inline-block";
      if (tabBtn) tabBtn.classList.add("active");
    }

    // Make tabs clickable so logged-in users can switch (non-destructive)
    Object.entries(levelToDom).forEach(([levelKey, dom]) => {
      const btn = document.getElementById(dom.tabId);
      const section = document.getElementById(dom.sectionId);
      if (btn && section) {
        btn.addEventListener("click", () => {
          hideAllPuzzles();
          clearActiveTabLinks();
          btn.classList.add("active");
          section.style.display = "block";
        });
      }
    });

    // LOGIN flow
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      message.textContent = "";
      clearActiveTabLinks();

      const usernameRaw = document.getElementById("username").value.trim();
      const username = usernameRaw.toLowerCase();
      const password = normalizeDate(document.getElementById("password").value.trim());

      // ‚úÖ Special user notifications (checked before authentication)
      if (renewalUsers.includes(username)) {
        message.textContent = "‚ö†Ô∏è Your Weekly Puzzle Plan has expired. Please contact Chess Titans Academy to renew.";
        message.className = "text-warning fw-semibold";
        return;
      }
      if (warningUsers.includes(username)) {
        message.textContent = "‚ö†Ô∏è You haven‚Äôt completed your assigned Weekly Task yet. Kindly reach out to your Chess Titans Academy tutor for support.";
        message.className = "text-danger fw-semibold";
        return;
      }

      // find matching user key in users (case-insensitive)
      const matchedKey = Object.keys(users).find(k => k.trim().toLowerCase() === username);
      if (!matchedKey) {
        message.textContent = "‚ùå Invalid username or Date of Birth!";
        message.className = "text-danger fw-semibold";
        return;
      }

      const expectedDob = users[matchedKey];
      if (expectedDob !== password) {
        message.textContent = "‚ùå Invalid username or Date of Birth!";
        message.className = "text-danger fw-semibold";
        return;
      }

      // ‚úÖ Valid credentials ‚Äî show searching message first
      message.textContent = "üîé Searching Student Details...";
      message.className = "text-info fw-semibold";

      // Small delay to show searching text, then show overlay loading and finally open assigned level
      setTimeout(() => {
        loadingText.textContent = "‚ôü Preparing Your Weekly Puzzle.....";
        loadingOverlay.style.display = "flex";

        setTimeout(() => {
          // hide overlay and open assigned section (guarded to avoid runtime errors if elements are missing)
          if (loadingOverlay) loadingOverlay.style.display = "none";
          if (loginSection) loginSection.style.display = "none";
          if (homeworkSection) homeworkSection.style.display = "block";

          // reset view
          hideAllPuzzles();
          hideAllTabs();
          clearActiveTabLinks();

          // normalize username for group checks
          const uname = username; // already lowercase

          // Admin (steve) sees all levels
          if (levelGroups.admin.includes(uname)) {
            // show all tabs and sections
            Object.values(levelToDom).forEach(v => {
              const sec = document.getElementById(v.sectionId);
              const tab = document.getElementById(v.tabId);
              if (sec) sec.style.display = "block";
              if (tab && tab.parentElement) tab.parentElement.style.display = "inline-block";
            });
            // set first tab active
            const firstTab = document.getElementById(levelToDom.beginner1.tabId);
            if (firstTab) firstTab.classList.add("active");
            message.textContent = "‚úÖ Logged in as Admin.";
            message.className = "text-success fw-semibold";
            return;
          }

          // Otherwise find which group the user belongs to
          let found = false;
          for (const [groupKey, names] of Object.entries(levelGroups)) {
            if (groupKey === "admin") continue;
            // compare lowercased entries
            const match = names.find(n => n.trim().toLowerCase() === uname);
            if (match) {
              // show the assigned level
              showAssignedLevel(groupKey);
              message.textContent = "‚úÖ Logged in.";
              message.className = "text-success fw-semibold";
              found = true;
              break;
            }
          }

          if (!found) {
            // fallback: if no group, show beginner by default
            showAssignedLevel("beginner1");
            message.textContent = "‚ö†Ô∏è No specific level assigned ‚Äî defaulted to Beginner Level 1.";
            message.className = "text-warning fw-semibold";
          }

        }, 4000); // overlay visible time
      }, 3000); // searching text visible time
    });

    // LOGOUT function
    function logout() {
      homeworkSection.style.display = "none";
      loginSection.style.display = "flex";
      form.reset();
      message.textContent = "";
      hideAllPuzzles();
      // restore nav tabs visible (so login screen shows tabs all)
      const allTabs = tabsContainer.querySelectorAll(".nav-item");
      allTabs.forEach(tab => tab.style.display = "inline-block");
      clearActiveTabLinks();
      // default active
      const defaultTab = document.getElementById("beginnerTab");
      if (defaultTab) defaultTab.classList.add("active");
    }

    // expose logout to global (onclick in markup uses it)
    window.logout = logout;
  </script>
</body>

</html>












